{% extends "base.html" %}

{% block title %}{{ entry.entry_date.strftime('%B %d, %Y') }} - View Entry{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-3xl font-bold text-gray-800">
            {{ entry.entry_date.strftime('%A, %B %d, %Y') }}
        </h1>
        <a href="/entries/new?entry_date={{ entry.entry_date.isoformat() }}" 
           class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700">
            Edit Entry
        </a>
    </div>
    
    <!-- Summary Panel -->
    <div class="bg-white rounded-xl shadow p-6 mb-6">
        <p class="text-gray-600">{{ entry.summary() }}</p>
    </div>
    
    <!-- Daily Assessment -->
    {% if entry.overall_wellbeing or entry.energy_level or entry.stress_level %}
    <div class="bg-white rounded-xl shadow p-6 mb-6">
        <h2 class="text-xl font-semibold mb-4">üìä Daily Assessment</h2>
        <div class="grid md:grid-cols-3 gap-6">
            {% if entry.overall_wellbeing %}
            <div class="text-center">
                <div class="text-3xl font-bold text-indigo-600">{{ entry.overall_wellbeing }}/10</div>
                <div class="text-sm text-gray-500">Overall Wellbeing</div>
            </div>
            {% endif %}
            {% if entry.energy_level %}
            <div class="text-center">
                <div class="text-3xl font-bold text-indigo-600">{{ entry.energy_level }}/10</div>
                <div class="text-sm text-gray-500">Energy Level</div>
            </div>
            {% endif %}
            {% if entry.stress_level %}
            <div class="text-center">
                <div class="text-3xl font-bold text-indigo-600">{{ entry.stress_level }}/10</div>
                <div class="text-sm text-gray-500">Stress Level</div>
            </div>
            {% endif %}
        </div>
        {% if entry.general_notes %}
        <div class="mt-4 pt-4 border-t">
            <p class="text-gray-700">{{ entry.general_notes }}</p>
        </div>
        {% endif %}
    </div>
    {% endif %}
    
    <!-- Symptoms -->
    {% if entry.symptoms %}
    <div class="bg-white rounded-xl shadow p-6 mb-6">
        <h2 class="text-xl font-semibold mb-4">ü§ï Symptoms</h2>
        <div class="space-y-3">
            {% for symptom in entry.symptoms %}
            <div class="flex items-center justify-between p-3 rounded-lg severity-{{ symptom.severity.value }}">
                <div>
                    <span class="font-medium">{{ symptom.display_type }}</span>
                    {% if symptom.display_location %}
                    <span class="text-gray-600">- {{ symptom.display_location }}</span>
                    {% endif %}
                    {% if symptom.notes %}
                    <p class="text-sm text-gray-600">{{ symptom.notes }}</p>
                    {% endif %}
                </div>
                <span class="text-lg font-bold">{{ symptom.severity.value }}/10</span>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
    
    <!-- Incidents -->
    {% if entry.incidents %}
    <div class="bg-white rounded-xl shadow p-6 mb-6">
        <h2 class="text-xl font-semibold mb-4">‚ö†Ô∏è Incidents</h2>
        <div class="space-y-3">
            {% for incident in entry.incidents %}
            <div class="p-3 rounded-lg bg-yellow-50 border border-yellow-200">
                <div class="flex justify-between">
                    <span class="font-medium">{{ incident.display_type }}</span>
                    <span class="text-sm text-gray-500">{{ incident.location.value.replace('_', ' ').title() }}</span>
                </div>
                <p class="text-gray-700">{{ incident.description }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
    
    <!-- Meals -->
    {% if entry.meals %}
    <div class="bg-white rounded-xl shadow p-6 mb-6">
        <h2 class="text-xl font-semibold mb-4">üçΩÔ∏è Meals & Drinks</h2>
        <div class="space-y-3">
            {% for meal in entry.meals %}
            <div class="p-3 rounded-lg bg-green-50 border border-green-200">
                <div class="flex justify-between items-start">
                    <div>
                        <span class="font-medium capitalize">{{ meal.meal_type.value }}</span>
                        <p class="text-gray-700">{{ meal.description }}</p>
                    </div>
                    <div class="flex space-x-2">
                        {% if meal.contains_alcohol %}
                        <span class="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded">üç∑ {{ meal.alcohol_units }} units</span>
                        {% endif %}
                        {% if meal.contains_caffeine %}
                        <span class="text-xs bg-amber-100 text-amber-800 px-2 py-1 rounded">‚òï Caffeine</span>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
    
    <div class="flex justify-between items-center">
        <a href="/entries/" class="text-gray-500 hover:text-gray-700">‚Üê Back to entries</a>
    </div>
</div>
{% endblock %}
